<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SCFHS Rationale Machine – Multi Item</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#f2f4f7;
  padding:20px;
}
.container {
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:25px;
  border-radius:8px;
  box-shadow:0 0 10px rgba(0,0,0,0.1);
}
.option {
  border:1px solid #ccc;
  border-radius:6px;
  padding:10px;
  margin:10px 0;
}
button {
  padding:10px 20px;
  font-size:16px;
  margin-top:15px;
}
.hidden { display:none; }

.review {
  margin-top:20px;
  background:#f9fafb;
  padding:15px;
  border-left:5px solid #007bff;
}

.tag {
  display:inline-block;
  padding:2px 8px;
  border-radius:4px;
  font-size:12px;
  margin-left:8px;
}
.SCFHS { background:#d4edda; }
.NCLEX { background:#cce5ff; }
.STR { background:#fff3cd; }
.SAFE_DELAY { background:#e2e3e5; }

.patho {
  margin-top:15px;
  background:#eef5ff;
  padding:10px;
  border-radius:6px;
  font-family: monospace;
}
</style>
</head>

<body>
<div class="container">

<h2>SCFHS Pathophysiologic Review Engine</h2>

<div id="quiz"></div>

<button onclick="submitAnswer()">Submit</button>
<button onclick="nextQuestion()" class="hidden" id="nextBtn">Next</button>

<div id="review" class="review hidden"></div>

</div>

<script>
// ==============================
// QUESTION BANK (INJECT HERE)
// ==============================
const questions = [
  {
    q: "When a nurse places a febrile infant into cold water as an emergency intervention, through which mechanism will the infant primarily lose body heat?",
    options: [
      { text: "Evaporation", tag: "SAFE_DELAY" },
      { text: "Convection", tag: "NCLEX" },
      { text: "Conduction", tag: "SCFHS" },
      { text: "Radiation", tag: "STR" }
    ],
    correctTag: "SCFHS",
    rationale: {
      correct: "Direct contact between the infant’s skin and cold water allows thermal energy to transfer from the warmer body to the cooler medium, which defines conduction.",
      distractors: {
        SAFE_DELAY: "Evaporation requires liquid changing to vapor, which does not occur during immersion.",
        NCLEX: "Convection involves heat loss through moving air or fluid, not direct surface contact.",
        STR: "Radiation involves heat transfer without physical contact."
      }
    }
  },
  {
    q: "A patient with acute blood loss develops hypotension, tachycardia, and oliguria. What is the primary physiologic problem?",
    options: [
      { text: "Decreased preload", tag: "SCFHS" },
      { text: "Increased afterload", tag: "NCLEX" },
      { text: "Myocardial failure", tag: "STR" },
      { text: "Peripheral vasodilation", tag: "SAFE_DELAY" }
    ],
    correctTag: "SCFHS",
    rationale: {
      correct: "Acute blood loss reduces circulating volume, leading to decreased venous return and preload, which lowers cardiac output and blood pressure.",
      distractors: {
        NCLEX: "Afterload does not primarily increase in acute hypovolemia.",
        STR: "There is no evidence of intrinsic cardiac dysfunction.",
        SAFE_DELAY: "Peripheral vasodilation is not the dominant mechanism in hemorrhagic shock."
      }
    }
  }
];

// ==============================
// ENGINE STATE
// ==============================
let index = 0;

// ==============================
// RENDER QUESTION
// ==============================
function renderQuestion() {
  const q = questions[index];
  document.getElementById("review").classList.add("hidden");
  document.getElementById("nextBtn").classList.add("hidden");

  document.getElementById("quiz").innerHTML = `
    <p><b>Question ${index + 1}:</b><br>${q.q}</p>
    ${q.options.map((opt, i) => `
      <div class="option">
        <input type="radio" name="answer" value="${opt.tag}">
        ${String.fromCharCode(65 + i)}. ${opt.text}
        <span class="tag ${opt.tag}">${opt.tag}</span>
      </div>
    `).join("")}
  `;
}

// ==============================
// SUBMIT ANSWER
// ==============================
function submitAnswer() {
  const selected = document.querySelector('input[name="answer"]:checked');
  if (!selected) {
    alert("Select an answer.");
    return;
  }

  const q = questions[index];
  const review = document.getElementById("review");
  review.classList.remove("hidden");

  let html = `
  <b>Correct Mechanism:</b><br>
  ${q.rationale.correct}
  <br><br>
  <b>Option Review:</b><br>
  `;

  q.options.forEach(opt => {
    if (opt.tag === q.correctTag) {
      html += `<div><b>${opt.text}</b> (${opt.tag}) — ✅ Correct</div>`;
    } else {
      html += `<div><b>${opt.text}</b> (${opt.tag}) — ❌ ${q.rationale.distractors[opt.tag]}</div>`;
    }
  });

  html += `
  <div class="patho">
Core Principle:
Conduction → direct contact
Convection → moving air/fluid
Radiation → no contact
Evaporation → liquid to vapor
  </div>
  `;

  review.innerHTML = html;
  document.getElementById("nextBtn").classList.remove("hidden");
}

// ==============================
// NEXT QUESTION
// ==============================
function nextQuestion() {
  index++;
  if (index >= questions.length) {
    document.getElementById("quiz").innerHTML =
      "<h3>✅ End of Quiz</h3>";
    document.getElementById("review").classList.add("hidden");
    document.getElementById("nextBtn").classList.add("hidden");
    return;
  }
  renderQuestion();
}

// INIT
renderQuestion();
</script>

</body>
</html>
