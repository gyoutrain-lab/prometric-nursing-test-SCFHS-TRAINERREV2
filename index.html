<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rationale Machine – Pathophysiology Review</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#f2f4f7;
  padding:20px;
}
.container {
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:25px;
  border-radius:8px;
  box-shadow:0 0 10px rgba(0,0,0,0.1);
}
.option {
  border:1px solid #ccc;
  border-radius:6px;
  padding:10px;
  margin:10px 0;
}
button {
  padding:10px 20px;
  font-size:16px;
  margin-top:15px;
}
.hidden { display:none; }

.review {
  margin-top:20px;
  background:#f9fafb;
  padding:15px;
  border-left:5px solid #007bff;
}

.tag {
  display:inline-block;
  padding:2px 8px;
  border-radius:4px;
  font-size:12px;
  margin-left:8px;
}
.SCFHS { background:#d4edda; }
.NCLEX { background:#cce5ff; }
.STR { background:#fff3cd; }
.SAFE_DELAY { background:#e2e3e5; }

.patho {
  margin-top:15px;
  background:#eef5ff;
  padding:10px;
  border-radius:6px;
  font-family: monospace;
}
</style>
</head>

<body>
<div class="container">

<h2>Pathophysiologic Rationale Engine (Generic)</h2>

<div id="quiz"></div>

<button onclick="submitAnswer()">Submit</button>

<div id="review" class="review hidden"></div>

</div>

<script>
// ==============================
// INJECT ANY QUESTION HERE
// ==============================
const question = {
  q: "When a nurse places a febrile infant into cold water as an emergency intervention, through which mechanism will the infant primarily lose body heat?",
  options: [
    { text: "Evaporation", tag: "SAFE_DELAY" },
    { text: "Convection", tag: "NCLEX" },
    { text: "Conduction", tag: "SCFHS" },
    { text: "Radiation", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Direct contact between the infant’s body and cold water causes heat loss through conduction, as thermal energy transfers from the warmer body to the cooler surface.",
    distractors: {
      SAFE_DELAY: "Evaporation requires vaporization of liquid, which does not occur with immersion in water.",
      NCLEX: "Convection involves heat transfer via movement of air or fluid, not direct surface contact.",
      STR: "Radiation involves heat loss without physical contact, which is not the mechanism in water immersion."
    }
  }
};

// ==============================
// RENDER QUIZ
// ==============================
const quizDiv = document.getElementById("quiz");

quizDiv.innerHTML = `
<p><b>Question:</b><br>${question.q}</p>
${question.options.map((opt, i) => `
  <div class="option">
    <input type="radio" name="answer" value="${opt.tag}">
    ${String.fromCharCode(65 + i)}. ${opt.text}
    <span class="tag ${opt.tag}">${opt.tag}</span>
  </div>
`).join("")}
`;

// ==============================
// SUBMIT & REVIEW ENGINE
// ==============================
function submitAnswer() {
  const selected = document.querySelector('input[name="answer"]:checked');
  if (!selected) {
    alert("Please select an answer.");
    return;
  }

  const review = document.getElementById("review");
  review.classList.remove("hidden");

  let html = `
  <b>Correct Answer Mechanism:</b><br>
  ${question.rationale.correct}
  <br><br>

  <b>Option Analysis:</b>
  `;

  question.options.forEach(opt => {
    if (opt.tag === question.correctTag) {
      html += `
      <div>
        <b>${opt.text}</b> (${opt.tag}) — ✅ Correct
      </div>`;
    } else {
      html += `
      <div>
        <b>${opt.text}</b> (${opt.tag}) — ❌ Incorrect<br>
        ${question.rationale.distractors[opt.tag]}
      </div>`;
    }
  });

  html += `
  <div class="patho">
Heat Transfer Principles:
Conduction → direct contact
Convection → moving air/fluid
Radiation → no contact
Evaporation → liquid to vapor
  </div>
  `;

  review.innerHTML = html;
}
</script>

</body>
</html>
